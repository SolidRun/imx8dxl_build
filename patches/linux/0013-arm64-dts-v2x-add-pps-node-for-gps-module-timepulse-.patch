From 97a21025a10a98a8543eabaa6b88014675d3c52d Mon Sep 17 00:00:00 2001
From: Josua Mayer <josua@solid-run.com>
Date: Sun, 9 Oct 2022 13:05:18 +0300
Subject: [PATCH 13/14] arm64: dts: v2x: add pps node for gps module timepulse
 output

Signed-off-by: Josua Mayer <josua@solid-run.com>
---
 arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi | 11 +++++++++++
 1 file changed, 11 insertions(+)

diff --git a/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi b/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi
index 836002ce8033..f4b9c6353abe 100644
--- a/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi
+++ b/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi
@@ -49,6 +49,13 @@ linux,cma {
 		/* TODO: EVK reserves memory for vdevs here ... */
 	};
 
+	pps {
+		compatible = "pps-gpio";
+		pinctrl-names = "default";
+		pinctrl-0 = <&pinctrl_lpuart2_gps_pps>;
+		gpios = <&lsio_gpio2 6 GPIO_ACTIVE_HIGH>;
+	};
+
 	v2x_reg_1v2: regulator-v2x-1v2 {
 		compatible = "regulator-fixed";
 		pinctrl-names = "default";
@@ -162,7 +169,11 @@ IMX8DXL_SNVS_TAMPER_OUT4_LSIO_GPIO2_IO08_IN		0x0000021
 				/* gps interrupt: io without pull-up */
 				IMX8DXL_SNVS_TAMPER_IN0_LSIO_GPIO2_IO09_IN		0x0000061
 				/* IMX8DXL_SNVS_TAMPER_IN0_LSIO_GPIO6_IO23_IN */
+			>;
+		};
 
+		pinctrl_lpuart2_gps_pps: lpuart2gpsppsgrp {
+			fsl,pins = <
 				/* gps timepulse: input without pull-up */
 				IMX8DXL_SNVS_TAMPER_OUT2_LSIO_GPIO2_IO06_IN		0x0000061
 			>;
-- 
2.37.3

