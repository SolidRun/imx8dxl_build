From eb7089cea3ab58bb0a9836df3c8b6a67299e1e9b Mon Sep 17 00:00:00 2001
From: Josua Mayer <josua@solid-run.com>
Date: Sun, 31 Jul 2022 12:54:23 +0300
Subject: [PATCH 2/9] arm64: dts: imx8dxl-v2x: change pinmux for saf5400
 boot/reset

Signed-off-by: Josua Mayer <josua@solid-run.com>
---
 .../boot/dts/freescale/imx8dxl-sr-som.dtsi    | 21 ++++++++++++-------
 1 file changed, 14 insertions(+), 7 deletions(-)

diff --git a/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi b/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi
index 4075ef23b607..e98560058f8e 100644
--- a/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi
+++ b/arch/arm64/boot/dts/freescale/imx8dxl-sr-som.dtsi
@@ -86,6 +86,10 @@ v2x_secure_reg_1v8: regulator-v2x-secure-1v8 {
 	};
 };
 
+&edma2 {
+	status = "okay";
+};
+
 /* exposed on J14: SDA(51), SCL(53) */
 &i2c2 {
 	#address-cells = <1>;
@@ -244,16 +248,19 @@ IMX8DXL_ENET0_RGMII_RXD3_CONN_USDHC1_DATA3		0x00000021
 
 		pinctrl_v2x: v2xgrp {
 			fsl,pins = <
-				/* v2x reset: io with pull-up */
-				IMX8DXL_ADC_IN0_LSIO_GPIO1_IO10		0x0000021
+				/* v2x reset: io without pull */
+				IMX8DXL_ADC_IN0_LSIO_GPIO1_IO10		0x0000060
 
 				/*
-				 * v2x boot0:
-				 * - pull-down: flash spi
-				 * - pull-up: slave sdio
-				 * Note: modem pins will change to outputs during boot ...
+				 * v2x boot0: io without pull
+				 * After reset, this pin selects modem boot media:
+				 * - 0: flash spi
+				 * - 1: slave sdio
+				 * Once the firmware boots however, the modem controls
+				 * this pin for flow-control to signal readiness.
 				 */
-				IMX8DXL_ADC_IN1_LSIO_GPIO1_IO09		0x0000021 /* io with pull-up */
+				IMX8DXL_ADC_IN1_LSIO_GPIO1_IO09		0x0000060 /* io without pull */
+				/* TODO: check whether this pin should have SoC pull-down, or external resistor, or neither */
 			>;
 		};
 
-- 
2.37.2

